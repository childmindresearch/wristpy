<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Docker Tutorial" href="docker_tutorial.html" /><link rel="prev" title="Command Line Tutorial" href="cli_tutorial.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>Python Tutorial - wristpy 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">wristpy 0.2.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/images/wristpy_logo_light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/images/wristpy_logo_dark.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">wristpy 0.2.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_tutorial.html">Command Line Tutorial</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Python Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_tutorial.html">Docker Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/wristpy.core.html">core</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.cli.html">wristpy.core.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.computations.html">wristpy.core.computations</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.config.html">wristpy.core.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.exceptions.html">wristpy.core.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.models.html">wristpy.core.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.core.orchestrator.html">wristpy.core.orchestrator</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/wristpy.io.html">io</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of io</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/wristpy.io.readers.html">wristpy.io.readers</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of wristpy.io.readers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="api/wristpy.io.readers.readers.html">wristpy.io.readers.readers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/wristpy.io.writers.html">wristpy.io.writers</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of wristpy.io.writers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="api/wristpy.io.writers.writers.html">wristpy.io.writers.writers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/wristpy.processing.html">processing</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.analytics.html">wristpy.processing.analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.calibration.html">wristpy.processing.calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.idle_sleep_mode_imputation.html">wristpy.processing.idle_sleep_mode_imputation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.metrics.html">wristpy.processing.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.mims.html">wristpy.processing.mims</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/wristpy.processing.processing_utils.html">wristpy.processing.processing_utils</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development Guide</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/python_tutorial.ipynb.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="python-tutorial">
<h1>Python Tutorial<a class="headerlink" href="#python-tutorial" title="Link to this heading">¶</a></h1>
<p>Wristpy is a Python library designed for processing and analyzing wrist-worn accelerometer data.
This tutorial will guide you through the basic steps of using <code class="docutils literal notranslate"><span class="pre">wristpy</span></code> to analyze your accelerometer data using python. Specifically,
we will cover the following topics through a few examples:</p>
<ul class="simple">
<li><p>running the default processor, analyzing the output data, and visualizing the results.</p></li>
<li><p>loading data and plotting the raw signals.</p></li>
<li><p>how to calibrate the data, computing ENMO and angle-z from the calibrated data and then plotting those metrics.</p></li>
<li><p>how to obtain non-wear windows and visualize them.</p></li>
<li><p>how to obtain sleep windows and visualize them.</p></li>
</ul>
<section id="example-1-running-the-default-processor">
<h2>Example 1: Running the default processor<a class="headerlink" href="#example-1-running-the-default-processor" title="Link to this heading">¶</a></h2>
<section id="running-files-and-directories">
<h3>Running files and directories<a class="headerlink" href="#running-files-and-directories" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">orchestrator</span></code> module of wristpy contains the default processor that will run the entire wristpy processing pipeline. This can be called as simply as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;install &quot;ipywidgets&quot; for Jupyter support&#39;</span><span class="p">)</span> <span class="c1">#suprress warnings for cleaner output</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">orchestrator</span>

<span class="n">input_directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tutorial_data&#39;</span><span class="p">)</span>
<span class="n">output_directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;build&#39;</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
   <span class="nb">input</span> <span class="o">=</span> <span class="n">input_directory</span> <span class="o">/</span> <span class="s1">&#39;three_nights.bin&#39;</span><span class="p">,</span>  
   <span class="n">output</span> <span class="o">=</span> <span class="n">output_directory</span> <span class="o">/</span> <span class="s1">&#39;three_nights_single_file.csv&#39;</span><span class="p">,</span> 
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This runs the processing pipeline with all the default arguments, creates an output <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file, a <code class="docutils literal notranslate"><span class="pre">.json</span></code> file with the pipeline configuration parameters, and will create a <code class="docutils literal notranslate"><span class="pre">results</span></code> object that contains the various output metrics (namely; the specified physical activity metric, angle-z, physical activity classification values, non-wear status, and sleep status).</p>
<p>The orchestrator can also process entire directories. The call to the orchestrator remains largely the same but now output is expected to be a directory and the desired filetype for the saved files can be specified through the output_filetype argument(default value is “.csv”):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">orchestrator</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="n">input_directory</span><span class="p">,</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">output_directory</span><span class="p">,</span>
    <span class="n">output_filetype</span> <span class="o">=</span> <span class="s2">&quot;.csv&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div></div>
</div>
<p>If users would prefer to process specific files instead of entire directories we recommend looping through a list of file names. The following code snippet will save results objects into a dictionary, and the output files into the desired directory:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;three_nights.bin&quot;</span><span class="p">)]</span> <span class="c1"># Add more file names to list as needed</span>
<span class="n">results_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_names</span><span class="p">:</span>
    <span class="n">input_path</span> <span class="o">=</span> <span class="n">input_directory</span> <span class="o">/</span> <span class="n">file</span>
    <span class="n">output_path</span> <span class="o">=</span> <span class="n">output_directory</span> <span class="o">/</span> <span class="n">file</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="n">input_path</span><span class="p">,</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">output_path</span><span class="p">)</span>
    <span class="n">results_dict</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">stem</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="physical-activity-metrics-results">
<h3>Physical Activity Metrics &amp; Results<a class="headerlink" href="#physical-activity-metrics-results" title="Link to this heading">¶</a></h3>
<p>Wristpy is capable of calculating the following physical activity metrics from actigraphy data:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://childmindresearch.github.io/wristpy/getting_started.html#enmo-euclidean-norm-minus-one">Euclidean Norm Minus-One (ENMO)</a></p></li>
<li><p><a class="reference external" href="https://childmindresearch.github.io/wristpy/getting_started.html#actigraph-activity-counts-ag-counts">Activity Counts (ag_count)</a></p></li>
<li><p><a class="reference external" href="https://childmindresearch.github.io/wristpy/getting_started.html#mad-mean-amplitude-deviation">Mean Amplitude Deviation (MAD)</a></p></li>
<li><p><a class="reference external" href="https://childmindresearch.github.io/wristpy/getting_started.html#mims-monitor-independent-summary-units">Monitor Independent Movement Summary Units (MIMS)</a></p></li>
</ol>
<p>The default metric is ENMO, but you can pass any combination of supported metrics as a list to the orchestrator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
   <span class="nb">input</span> <span class="o">=</span> <span class="n">input_directory</span> <span class="o">/</span> <span class="s1">&#39;three_nights.bin&#39;</span><span class="p">,</span>
   <span class="n">output</span> <span class="o">=</span> <span class="n">output_directory</span> <span class="o">/</span> <span class="s1">&#39;three_nights_multiple_metrics.csv&#39;</span><span class="p">,</span>
   <span class="n">activity_metric</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;enmo&#39;</span><span class="p">,</span> <span class="s1">&#39;mad&#39;</span><span class="p">,]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The resulting <a class="reference external" href="https://childmindresearch.github.io/wristpy/api/wristpy.io.writers.writers.html#wristpy.io.writers.writers.OrchestratorResults">OrchestratorResults</a> object will contain the outputs for each metric in the order they were provided. The same applies to the physical activity levels associated with each metric.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">enmo</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">physical_activity_metric</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
<span class="n">mad</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">physical_activity_metric</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 

<span class="n">enmo_levels</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">physical_activity_levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
<span class="n">mad_levels</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">physical_activity_levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
</pre></div>
</div>
</div>
</div>
<p>We can visualize some of the outputs within the <code class="docutils literal notranslate"><span class="pre">results</span></code> object, directly, with the following scripts:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Plot the default physical activity metrics (ENMO) across the entire data set:</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1">#Plot the default physical activity metrics (ENMO) across the entire data set:</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;matplotlib&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">physical_activity_metric</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">physical_activity_metric</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the sleep windows with normalized angle-z data:</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">anglez</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">anglez</span><span class="o">.</span><span class="n">measurements</span><span class="o">/</span><span class="mi">90</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">sleep_status</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">sleep_status</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Angle Z&#39;</span><span class="p">,</span> <span class="s1">&#39;Sleep Windows&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#We can also view and process these outputs from the saved `.csv` output file:</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">polars</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pl</span>

<span class="n">output_results</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">output_directory</span><span class="o">/</span> <span class="s1">&#39;three_nights.csv&#39;</span><span class="p">,</span> <span class="n">try_parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">activity_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;inactive&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;light&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;moderate&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;vigorous&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>

<span class="n">phys_activity</span> <span class="o">=</span> <span class="n">output_results</span><span class="p">[</span><span class="s1">&#39;enmo physical activity levels&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">activity_mapping</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">output_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">phys_activity</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># It is also possible to do some analysis on these output variables, for example, if we want to find the percent of time spent inactive, or in light, moderate, or vigorous physical activity:</span>

<span class="n">inactivity_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">phys_activity</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">light_activity_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">phys_activity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">moderate_activity_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">phys_activity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">vigorous_activity_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">phys_activity</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">total_activity_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_results</span><span class="p">[</span><span class="s1">&#39;enmo physical activity levels&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Light activity percent: </span><span class="si">{</span><span class="n">light_activity_count</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">total_activity_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moderate activity percent: </span><span class="si">{</span><span class="n">moderate_activity_count</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">total_activity_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Vigorous activity percent: </span><span class="si">{</span><span class="n">vigorous_activity_count</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">total_activity_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Inactivity percent: </span><span class="si">{</span><span class="n">inactivity_count</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">total_activity_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><h4 class="rubric" id="configuring-a-custom-pipeline">Configuring a custom pipeline</h4>
<p>A custom processing pipeline can be easily created by modifying the input arguments to the <code class="docutils literal notranslate"><span class="pre">orchestrator.run</span></code> call.</p>
<blockquote>
<div><p>Complete documentation on these parameters can be found <a class="reference external" href="https://childmindresearch.github.io/wristpy/wristpy/core/orchestrator.html#run">here</a>.
Example:</p>
</div></blockquote>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="nb">input</span> <span class="o">=</span> <span class="n">input_directory</span> <span class="o">/</span> <span class="s2">&quot;three_nights.bin&quot;</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="n">output_directory</span> <span class="o">/</span> <span class="s2">&quot;custom_pipeline.csv&quot;</span><span class="p">,</span> <span class="n">output_filetype</span> <span class="o">=</span> <span class="s2">&quot;.parquet&quot;</span><span class="p">,</span> <span class="n">calibrator</span><span class="o">=</span><span class="s2">&quot;gradient&quot;</span><span class="p">,</span> <span class="n">activity_metric</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ag_count&quot;</span><span class="p">],</span> <span class="n">nonwear_algorithm</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;detach&quot;</span><span class="p">],</span> <span class="n">epoch_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">thresholds</span><span class="o">=</span><span class="p">[(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="example-2-loading-data-and-plotting-the-raw-signals">
<h2>Example 2: Loading data and plotting the raw signals<a class="headerlink" href="#example-2-loading-data-and-plotting-the-raw-signals" title="Link to this heading">¶</a></h2>
<p>In this example we will go over the built-in functions to directly read the raw accelerometer and light data, and how to quickly visualize this information.</p>
<p>The built-in <code class="docutils literal notranslate"><span class="pre">readers</span></code> module can be used to load all the sensor and metadata from one of the support wristwatches (<code class="docutils literal notranslate"><span class="pre">.gt3x</span></code> or <code class="docutils literal notranslate"><span class="pre">.bin</span></code>), the reader will automatically select the appropriate loading methodology.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.io.readers</span><span class="w"> </span><span class="kn">import</span> <span class="n">readers</span>

<span class="n">watch_data</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">read_watch_data</span><span class="p">(</span><span class="n">input_directory</span> <span class="o">/</span> <span class="s2">&quot;three_nights.bin&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can then visualize the raw accelerometer and light sensor values very easily as follows:</p>
<p>Plot the raw acceleration along the <em>x</em>-axis:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">watch_data</span><span class="o">.</span><span class="n">acceleration</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">watch_data</span><span class="o">.</span><span class="n">acceleration</span><span class="o">.</span><span class="n">measurements</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Plot the light data:</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">watch_data</span><span class="o">.</span><span class="n">lux</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">watch_data</span><span class="o">.</span><span class="n">lux</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="example-3-plot-the-epoch-level-measurements">
<h2>Example 3:  Plot the epoch-level measurements<a class="headerlink" href="#example-3-plot-the-epoch-level-measurements" title="Link to this heading">¶</a></h2>
<p>In this example we will expand on the skills learned in <code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">2</span></code>: we will load the sensor data, calibrate, and then calculate the ENMO and angle-z data in 5s windows (epoch-level data).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">computations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.io.readers</span><span class="w"> </span><span class="kn">import</span> <span class="n">readers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.processing</span><span class="w"> </span><span class="kn">import</span> <span class="n">calibration</span><span class="p">,</span> <span class="n">metrics</span>

<span class="n">watch_data</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">read_watch_data</span><span class="p">(</span><span class="n">input_directory</span> <span class="o">/</span> <span class="s2">&quot;three_nights.bin&quot;</span><span class="p">)</span>

<span class="c1">#Calibration phase</span>
<span class="n">calibrator_object</span> <span class="o">=</span> <span class="n">calibration</span><span class="o">.</span><span class="n">ConstrainedMinimizationCalibration</span><span class="p">()</span>
<span class="n">calibrated_data</span> <span class="o">=</span> <span class="n">calibrator_object</span><span class="o">.</span><span class="n">run_calibration</span><span class="p">(</span><span class="n">watch_data</span><span class="o">.</span><span class="n">acceleration</span><span class="p">)</span>

<span class="c1">#Compute the desired metrics</span>
<span class="n">enmo</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">euclidean_norm_minus_one</span><span class="p">(</span><span class="n">calibrated_data</span><span class="p">)</span>
<span class="n">anglez</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">angle_relative_to_horizontal</span><span class="p">(</span><span class="n">calibrated_data</span><span class="p">)</span>

<span class="c1">#Obtain the epoch-level data, default is 5s windows</span>
<span class="n">enmo_epoch1</span> <span class="o">=</span> <span class="n">computations</span><span class="o">.</span><span class="n">moving_mean</span><span class="p">(</span><span class="n">enmo</span><span class="p">)</span>
<span class="n">anglez_epoch1</span> <span class="o">=</span> <span class="n">computations</span><span class="o">.</span><span class="n">moving_mean</span><span class="p">(</span><span class="n">anglez</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can then visualize the <code class="docutils literal notranslate"><span class="pre">epoch1</span></code> measurements as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>


<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">enmo_epoch1</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">enmo_epoch1</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ENMO&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">anglez_epoch1</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">anglez_epoch1</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Anglez&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="example-4-visualize-the-detected-non-wear-times">
<h2>Example 4: Visualize the detected non-wear times<a class="headerlink" href="#example-4-visualize-the-detected-non-wear-times" title="Link to this heading">¶</a></h2>
<p>In this example we will build on <code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">3</span></code> by also solving for the non-wear periods, as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.io.readers</span><span class="w"> </span><span class="kn">import</span> <span class="n">readers</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.processing</span><span class="w"> </span><span class="kn">import</span> <span class="n">calibration</span><span class="p">,</span> <span class="n">metrics</span>

<span class="n">watch_data</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">read_watch_data</span><span class="p">(</span><span class="n">input_directory</span> <span class="o">/</span> <span class="s2">&quot;three_nights.bin&quot;</span><span class="p">)</span>
<span class="n">calibrator_object</span> <span class="o">=</span> <span class="n">calibration</span><span class="o">.</span><span class="n">ConstrainedMinimizationCalibration</span><span class="p">()</span>
<span class="n">calibrated_data</span> <span class="o">=</span> <span class="n">calibrator_object</span><span class="o">.</span><span class="n">run_calibration</span><span class="p">(</span><span class="n">watch_data</span><span class="o">.</span><span class="n">acceleration</span><span class="p">)</span>

<span class="c1">#Find non-wear periods, using the DETACH algorithm</span>
<span class="n">non_wear_array</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">detect_nonwear</span><span class="p">(</span><span class="n">calibrated_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can then visualize the non-wear periods, in comparison to movement (ENMO at the epoch-level):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">wristpy.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">computations</span>

<span class="n">enmo</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">euclidean_norm_minus_one</span><span class="p">(</span><span class="n">calibrated_data</span><span class="p">)</span>
<span class="n">enmo_epoch1</span> <span class="o">=</span> <span class="n">computations</span><span class="o">.</span><span class="n">moving_mean</span><span class="p">(</span><span class="n">enmo</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">enmo_epoch1</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">enmo_epoch1</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">non_wear_array</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">non_wear_array</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;ENMO Epoch1&#39;</span><span class="p">,</span> <span class="s1">&#39;Non-wear&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="example-5-compute-and-plot-the-sleep-windows">
<h2>Example 5: Compute and plot the sleep windows<a class="headerlink" href="#example-5-compute-and-plot-the-sleep-windows" title="Link to this heading">¶</a></h2>
<p>We can visualize the sleep periods in comparison to other metrics; in this example, we compare the sleep windows to the angle-z data and the non-wear periods. In the default pipeline any sleep periods that overlap with non-wear periods are filtered out.
This plot shows the sleep periods visualized by a blue trace, non-wear periods are visualized with a green trace, and the angle-z data with the semi-transparent red trace. These are all accessible directly from the results object created with the custom pipeline:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">sleep_status</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">sleep_status</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sleep Periods&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">nonwear_status</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">nonwear_status</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">anglez</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">anglez</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Anglez Epoch1&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Sleep Period/Non-wear&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="docker_tutorial.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Docker Tutorial</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cli_tutorial.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Command Line Tutorial</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Child Mind Institute
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Python Tutorial</a><ul>
<li><a class="reference internal" href="#example-1-running-the-default-processor">Example 1: Running the default processor</a><ul>
<li><a class="reference internal" href="#running-files-and-directories">Running files and directories</a></li>
<li><a class="reference internal" href="#physical-activity-metrics-results">Physical Activity Metrics &amp; Results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-2-loading-data-and-plotting-the-raw-signals">Example 2: Loading data and plotting the raw signals</a></li>
<li><a class="reference internal" href="#example-3-plot-the-epoch-level-measurements">Example 3:  Plot the epoch-level measurements</a></li>
<li><a class="reference internal" href="#example-4-visualize-the-detected-non-wear-times">Example 4: Visualize the detected non-wear times</a></li>
<li><a class="reference internal" href="#example-5-compute-and-plot-the-sleep-windows">Example 5: Compute and plot the sleep windows</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=938c9ccc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>